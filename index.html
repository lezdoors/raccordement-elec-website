<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raccordement Électrique Enedis en Ligne - Votre Partenaire Raccordement au Réseau d'Enedis</title>
    <meta name="description" content="Service expert pour vos raccordements électriques Enedis. Accompagnement administratif professionnel pour particuliers et entreprises. Processus simplifié et suivi personnalisé.">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GT-MJKTJGCK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GT-MJKTJGCK');
    </script>

    <style>
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        :root {
            --enedis-blue: #0b1ede;
            --enedis-green: #6dc067;
        }
        
        .enedis-blue { color: var(--enedis-blue); }
        .bg-enedis-blue { background-color: var(--enedis-blue); }
        .enedis-green { color: var(--enedis-green); }
        .bg-enedis-green { background-color: var(--enedis-green); }
        .border-enedis-blue { border-color: var(--enedis-blue); }
        .border-enedis-green { border-color: var(--enedis-green); }
        
        .hero-gradient {
            background: linear-gradient(135deg, var(--enedis-blue) 0%, #1e3a8a 45%, #1d4ed8 100%);
        }
        
        .btn-primary {
            background: var(--enedis-green);
            color: white;
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 14px 0 rgba(109, 192, 103, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px 0 rgba(109, 192, 103, 0.5);
            background: #5cb85c;
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--enedis-blue);
            padding: 14px 28px;
            border: 2px solid var(--enedis-blue);
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-secondary:hover {
            background: var(--enedis-blue);
            color: white;
        }
        
        .card-hover {
            background: white;
            border-radius: 16px;
            padding: 32px;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .step-circle {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 24px;
            margin: 0 auto 24px;
            color: white;
            box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);
        }
        
        .step-1 { background: var(--enedis-blue); }
        .step-2 { background: #3b82f6; }
        .step-3 { background: #6366f1; }
        .step-4 { background: var(--enedis-green); }
        
        .nav-blur {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }
        
        .form-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--enedis-blue);
            box-shadow: 0 0 0 4px rgba(11, 30, 222, 0.1);
        }
        
        .progress-bar {
            height: 8px;
            background: #f1f5f9;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--enedis-blue), var(--enedis-green));
            transition: width 0.8s ease;
            border-radius: 8px;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
            animation: slideIn 0.4s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .radio-option {
            padding: 16px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .radio-option:hover {
            border-color: var(--enedis-blue);
        }
        
        .radio-option.selected {
            border-color: var(--enedis-blue);
            background: rgba(11, 30, 222, 0.05);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 280px;
            background-color: #1f2937;
            color: white;
            text-align: left;
            border-radius: 8px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -140px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .tooltip .tooltiptext {
                width: 240px;
                margin-left: -120px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="nav-blur fixed w-full top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Logo -->
                <div class="flex items-center cursor-pointer" onclick="showPage('home')">
                    <svg width="48" height="32" viewBox="0 0 160 80" xmlns="http://www.w3.org/2000/svg">
                        <!-- Maison -->
                        <rect x="20" y="35" width="40" height="30" fill="var(--enedis-blue)" rx="4"/>
                        <polygon points="15,35 40,15 65,35" fill="var(--enedis-blue)"/>
                        <rect x="30" y="50" width="8" height="15" fill="white"/>
                        <rect x="45" y="45" width="6" height="6" fill="white"/>
                        
                        <!-- Câble électrique -->
                        <path d="M65 50 Q80 45 95 50" stroke="var(--enedis-green)" stroke-width="3" fill="none"/>
                        <circle cx="95" cy="50" r="3" fill="var(--enedis-green)"/>
                        
                        <!-- Texte -->
                        <text x="105" y="35" font-family="Inter" font-size="8" font-weight="600" fill="var(--enedis-blue)">Votre partenaire</text>
                        <text x="105" y="45" font-family="Inter" font-size="7" fill="#666">raccordement au réseau</text>
                        <text x="105" y="55" font-family="Inter" font-size="7" fill="#666">d'Enedis</text>
                    </svg>
                </div>
                
                <!-- Menu Desktop -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" onclick="showPage('home')" class="text-gray-700 hover:text-enedis-blue transition-colors font-medium">Accueil</a>
                    <a href="#services" class="text-gray-700 hover:text-enedis-blue transition-colors font-medium">Services</a>
                    <a href="#guide" class="text-gray-700 hover:text-enedis-blue transition-colors font-medium">Guide</a>
                    <a href="#a-propos" class="text-gray-700 hover:text-enedis-blue transition-colors font-medium">À Propos</a>
                </div>
                
                <!-- CTA -->
                <div class="hidden md:flex items-center space-x-4">
                    <button onclick="showPage('formulaire')" class="btn-primary">
                        Faire ma demande
                    </button>
                    <a href="tel:0970709570" class="text-gray-600 hover:text-enedis-blue transition-colors flex items-center font-medium">
                        <i class="fas fa-phone mr-2 text-enedis-green"></i>
                        09 70 70 95 70
                    </a>
                </div>
                
                <!-- Menu Mobile -->
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-gray-700 p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
            <div class="px-4 py-4 space-y-3">
                <a href="#" onclick="showPage('home')" class="block py-2 text-gray-700 font-medium">Accueil</a>
                <a href="#services" class="block py-2 text-gray-700 font-medium">Services</a>
                <a href="#guide" class="block py-2 text-gray-700 font-medium">Guide</a>
                <a href="#a-propos" class="block py-2 text-gray-700 font-medium">À Propos</a>
                <button onclick="showPage('formulaire')" class="btn-primary w-full mt-4">Faire ma demande</button>
                <a href="tel:0970709570" class="block py-2 text-center text-gray-600 font-medium">
                    <i class="fas fa-phone mr-2 text-enedis-green"></i>09 70 70 95 70
                </a>
            </div>
        </div>
    </nav>

    <!-- Spacer for fixed nav -->
    <div class="h-20"></div>

    <!-- Page d'accueil -->
    <div id="home" class="page active">
        <!-- Hero Section -->
        <section class="hero-gradient text-white py-24 relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-8">
                    Service expert pour tous vos besoins électriques
                </h1>
                
                <p class="text-xl md:text-2xl mb-12 opacity-90 max-w-4xl mx-auto">
                    Accompagnement administratif professionnel pour vos raccordements Enedis. 
                    Expertise technique et suivi personnalisé garantis.
                </p>
                
                <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
                    <button onclick="showPage('formulaire')" class="btn-primary text-lg">
                        <i class="fas fa-arrow-right mr-3"></i>
                        Commencer ma demande
                    </button>
                    <a href="tel:0970709570" class="btn-secondary bg-transparent border-white text-white hover:bg-white hover:text-enedis-blue">
                        <i class="fas fa-phone mr-3"></i>
                        09 70 70 95 70
                    </a>
                </div>
            </div>
        </section>

        <!-- Section Demande -->
        <section class="py-16 bg-white">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">
                    Votre Demande de Raccordement
                </h2>
                <p class="text-lg text-gray-600 mb-8">
                    Processus simplifié en 5 étapes pour votre raccordement Enedis personnalisé
                </p>
                
                <div class="bg-gray-50 rounded-2xl p-8 mb-8">
                    <p class="text-sm text-gray-600 mb-4">Besoin d'aide pour remplir le formulaire ?</p>
                    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                        <a href="tel:0970709570" class="flex items-center text-enedis-blue font-semibold">
                            <i class="fas fa-phone mr-2"></i>
                            09 70 70 95 70
                        </a>
                        <span class="text-gray-500">•</span>
                        <span class="text-gray-600">Lundi-Vendredi 8h-18h</span>
                    </div>
                </div>
                
                <button onclick="showPage('formulaire')" class="btn-primary">
                    Démarrer ma demande
                </button>
                <p class="text-sm text-gray-500 mt-4">Gratuit • Sans engagement</p>
            </div>
        </section>

        <!-- Section Process -->
        <section class="py-24 bg-gray-50" id="services">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-8">
                        Votre Raccordement en 4 Étapes
                    </h2>
                    <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                        Un processus simple et transparent pour votre raccordement Enedis
                    </p>
                </div>
                
                <div class="grid md:grid-cols-4 gap-8">
                    <!-- Étape 1 -->
                    <div class="text-center">
                        <div class="step-circle step-1">1</div>
                        <h3 class="text-xl font-bold mb-4 text-gray-900">Formulaire</h3>
                        <p class="text-gray-600">
                            Remplissez notre formulaire en quelques minutes
                        </p>
                    </div>
                    
                    <!-- Étape 2 -->
                    <div class="text-center">
                        <div class="step-circle step-2">2</div>
                        <h3 class="text-xl font-bold mb-4 text-gray-900">Préparation</h3>
                        <p class="text-gray-600">
                            Nos experts préparent votre dossier technique
                        </p>
                    </div>
                    
                    <!-- Étape 3 -->
                    <div class="text-center">
                        <div class="step-circle step-3">3</div>
                        <h3 class="text-xl font-bold mb-4 text-gray-900">Suivi</h3>
                        <p class="text-gray-600">
                            Nous suivons votre demande auprès d'Enedis
                        </p>
                    </div>
                    
                    <!-- Étape 4 -->
                    <div class="text-center">
                        <div class="step-circle step-4">4</div>
                        <h3 class="text-xl font-bold mb-4 text-gray-900">Raccordement</h3>
                        <p class="text-gray-600">
                            Enedis réalise votre raccordement
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Services -->
        <section class="py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-8">
                        Types de Raccordement
                    </h2>
                    <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                        Solutions adaptées à vos besoins électriques
                    </p>
                </div>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Définitif -->
                    <div class="card-hover text-center">
                        <div class="w-16 h-16 bg-enedis-blue rounded-2xl flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-home text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-4 text-gray-900">Définitif</h3>
                        <p class="text-gray-600">
                            Maisons neuves et branchement électrique permanent
                        </p>
                    </div>
                    
                    <!-- Provisoire -->
                    <div class="card-hover text-center">
                        <div class="w-16 h-16 bg-enedis-green rounded-2xl flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-clock text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-4 text-gray-900">Provisoire</h3>
                        <p class="text-gray-600">
                            Chantiers et événements temporaires
                        </p>
                    </div>
                    
                    <!-- Viabilisation -->
                    <div class="card-hover text-center">
                        <div class="w-16 h-16" style="background: #6366f1;" class="rounded-2xl flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-map text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-4 text-gray-900">Viabilisation</h3>
                        <p class="text-gray-600">
                            Préparation et viabilisation de terrain
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section CTA Final -->
        <section class="py-24 bg-enedis-blue text-white">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-4xl font-bold mb-8">
                    Prêt à commencer votre projet ?
                </h2>
                <p class="text-xl mb-12 opacity-90">
                    Démarrez votre demande de raccordement électrique dès maintenant
                </p>
                <button onclick="showPage('formulaire')" class="bg-enedis-green hover:bg-green-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-300">
                    <i class="fas fa-play mr-3"></i>
                    Faire ma demande
                </button>
            </div>
        </section>
    </div>

    <!-- Page Formulaire -->
    <div id="formulaire" class="page">
        <div class="min-h-screen bg-gray-50 py-12">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <!-- Breadcrumb -->
                <nav class="flex mb-8" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="showPage('home')" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-enedis-blue">
                                <i class="fas fa-home mr-2"></i>
                                Accueil
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <i class="fas fa-chevron-right text-gray-400 mx-2"></i>
                                <span class="ml-1 text-sm font-medium text-gray-500 md:ml-2">Demande de raccordement</span>
                            </div>
                        </li>
                    </ol>
                </nav>

                <!-- Form Container -->
                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <!-- Header -->
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-bold text-gray-900 mb-4">Demande de Raccordement Enedis</h1>
                        <p class="text-gray-600">Accompagnement administratif professionnel</p>
                    </div>

                    <!-- Progress Bar -->
                    <div class="mb-8">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill" style="width: 25%"></div>
                        </div>
                        <div class="flex justify-between mt-4 text-sm">
                            <span id="step-label" class="font-medium text-gray-700">Étape 1 sur 4</span>
                            <span id="step-title" class="text-gray-600">Informations utilisateur</span>
                        </div>
                    </div>

                    <!-- Form -->
                    <form id="raccordement-form" class="space-y-6">
                        <!-- Étape 1: Type utilisateur + Contact -->
                        <div class="form-step active" id="step-1">
                            <h2 class="text-2xl font-bold mb-6 text-gray-900">Vos informations</h2>
                            
                            <!-- Type d'utilisateur -->
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-4">Type d'utilisateur</label>
                                <div class="grid md:grid-cols-3 gap-4">
                                    <div class="radio-option" onclick="selectUserType('particulier')">
                                        <input type="radio" name="userType" value="particulier" class="sr-only">
                                        <div class="text-center">
                                            <i class="fas fa-user text-2xl text-enedis-blue mb-2"></i>
                                            <div class="font-semibold">Particulier</div>
                                        </div>
                                    </div>
                                    <div class="radio-option" onclick="selectUserType('professionnel')">
                                        <input type="radio" name="userType" value="professionnel" class="sr-only">
                                        <div class="text-center">
                                            <i class="fas fa-building text-2xl text-enedis-blue mb-2"></i>
                                            <div class="font-semibold">Professionnel</div>
                                        </div>
                                    </div>
                                    <div class="radio-option" onclick="selectUserType('collectivite')">
                                        <input type="radio" name="userType" value="collectivite" class="sr-only">
                                        <div class="text-center">
                                            <i class="fas fa-landmark text-2xl text-enedis-blue mb-2"></i>
                                            <div class="font-semibold">Collectivité</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Contact -->
                            <div class="grid md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-3">Prénom *</label>
                                    <input type="text" name="prenom" required class="form-input" placeholder="Votre prénom">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-3">Nom *</label>
                                    <input type="text" name="nom" required class="form-input" placeholder="Votre nom">
                                </div>
                            </div>
                            
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Email *</label>
                                <input type="email" name="email" required class="form-input" placeholder="votre@email.com">
                            </div>
                            
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Téléphone *</label>
                                <input type="tel" name="telephone" required class="form-input" placeholder="06 12 34 56 78" id="phone-input">
                            </div>

                            <!-- Champs conditionnels -->
                            <div id="professional-fields" class="hidden space-y-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-3">
                                        Raison sociale *
                                        <div class="tooltip ml-2">
                                            <i class="fas fa-question-circle text-gray-400 cursor-help"></i>
                                            <span class="tooltiptext">Nom officiel de votre entreprise tel qu'enregistré</span>
                                        </div>
                                    </label>
                                    <input type="text" name="raisonSociale" class="form-input" placeholder="Nom de votre entreprise">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-3">
                                        Numéro SIREN *
                                        <div class="tooltip ml-2">
                                            <i class="fas fa-question-circle text-gray-400 cursor-help"></i>
                                            <span class="tooltiptext">Numéro d'identification à 9 chiffres de votre entreprise</span>
                                        </div>
                                    </label>
                                    <input type="text" name="siren" class="form-input" placeholder="123 456 789" maxlength="9">
                                </div>
                            </div>

                            <div id="collectivity-fields" class="hidden space-y-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-3">Nom de la collectivité *</label>
                                    <input type="text" name="nomCollectivite" class="form-input" placeholder="Nom de la collectivité">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-3">Numéro SIREN *</label>
                                    <input type="text" name="sirenCollectivite" class="form-input" placeholder="123 456 789" maxlength="9">
                                </div>
                            </div>
                        </div>

                        <!-- Étape 2: Adresses -->
                        <div class="form-step" id="step-2">
                            <h2 class="text-2xl font-bold mb-6 text-gray-900">Adresses</h2>
                            
                            <!-- Adresse de facturation -->
                            <div class="mb-8">
                                <h3 class="text-lg font-semibold mb-4 text-gray-900">Adresse de facturation *</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-3">Adresse *</label>
                                        <input type="text" name="adresseFacturation" required class="form-input" placeholder="123 Rue de la République">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-3">Complément d'adresse</label>
                                        <input type="text" name="complementFacturation" class="form-input" placeholder="Bâtiment A, Appartement 5">
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-3">Code postal *</label>
                                            <input type="text" name="codePostalFacturation" required class="form-input" placeholder="75001" id="postal-facturation">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-3">Ville *</label>
                                            <input type="text" name="villeFacturation" required class="form-input" placeholder="Paris" id="city-facturation" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Adresse du projet -->
                            <div>
                                <div class="flex items-center mb-4">
                                    <input type="checkbox" id="same-address" name="sameAddress" class="mr-3">
                                    <label for="same-address" class="text-sm font-medium text-gray-700">L'adresse du projet est la même que l'adresse de facturation</label>
                                </div>
                                
                                <div id="project-address-fields">
                                    <h3 class="text-lg font-semibold mb-4 text-gray-900">Adresse du projet *</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-3">Adresse du projet *</label>
                                            <input type="text" name="adresseProjet" class="form-input" placeholder="123 Rue du Projet" id="address-project">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-3">Complément d'adresse</label>
                                            <input type="text" name="complementProjet" class="form-input" placeholder="Bâtiment B">
                                        </div>
                                        <div class="grid md:grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-semibold text-gray-700 mb-3">Code postal *</label>
                                                <input type="text" name="codePostalProjet" class="form-input" placeholder="75002" id="postal-project">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-semibold text-gray-700 mb-3">Ville *</label>
                                                <input type="text" name="villeProjet" class="form-input" placeholder="Paris" id="city-project" readonly>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Étape 3: Détails du projet -->
                        <div class="form-step" id="step-3">
                            <h2 class="text-2xl font-bold mb-6 text-gray-900">Détails du projet</h2>
                            
                            <div class="space-y-6">
                                <!-- Type de raccordement -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-4">
                                        Type de raccordement *
                                        <div class="tooltip ml-2">
                                            <i class="fas fa-question-circle text-gray-400 cursor-help"></i>
                                            <span class="tooltiptext">Choisissez selon votre besoin: Nouveau pour une première installation, Provisoire pour un usage temporaire, etc.</span>
                                        </div>
                                    </label>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div class="radio-option" onclick="selectOption('typeRaccordement', 'nouveau')">
                                            <input type="radio" name="typeRaccordement" value="nouveau" class="sr-only">
                                            <div class="font-semibold">Nouveau</div>
                                            <div class="text-sm text-gray-600">Première installation</div>
                                        </div>
                                        <div class="radio-option" onclick="selectOption('typeRaccordement', 'provisoire')">
                                            <input type="radio" name="typeRaccordement" value="provisoire" class="sr-only">
                                            <div class="font-semibold">Provisoire</div>
                                            <div class="text-sm text-gray-600">Installation temporaire</div>
                                        </div>
                                        <div class="radio-option" onclick="selectOption('typeRaccordement', 'augmentation')">
                                            <input type="radio" name="typeRaccordement" value="augmentation" class="sr-only">
                                            <div class="font-semibold">Augmentation de puissance</div>
                                            <div class="text-sm text-gray-600">Modifier la puissance</div>
                                        </div>
                                        <div class="radio-option" onclick="selectOption('typeRaccordement', 'deplacement')">
                                            <input type="radio" name="typeRaccordement" value="deplacement" class="sr-only">
                                            <div class="font-semibold">Déplacement compteur</div>
                                            <div class="text-sm text-gray-600">Changer l'emplacement</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Type de projet -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-4">Type de projet *</label>
                                    <select name="typeProjet" required class="form-input">
                                        <option value="">Sélectionnez le type de projet</option>
                                        <option value="maison">Maison individuelle</option>
                                        <option value="immeuble">Immeuble collectif</option>
                                        <option value="commercial">Local commercial</option>
                                        <option value="terrain">Terrain nu</option>
                                        <option value="industriel">Bâtiment industriel</option>
                                    </select>
                                </div>

                                <!-- Type d'alimentation -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-4">
                                        Type d'alimentation *
                                        <div class="tooltip ml-2">
                                            <i class="fas fa-question-circle text-gray-400 cursor-help"></i>
                                            <span class="tooltiptext">Monophasé pour usage domestique standard, Triphasé pour gros besoins électriques</span>
                                        </div>
                                    </label>
                                    <div class="space-y-3">
                                        <div class="radio-option" onclick="selectAlimentation('monophase')">
                                            <input type="radio" name="typeAlimentation" value="monophase" class="sr-only">
                                            <div class="font-semibold">Monophasé (3–9 kVA)</div>
                                            <div class="text-sm text-gray-600">Usage domestique standard</div>
                                        </div>
                                        <div class="radio-option" onclick="selectAlimentation('triphase')">
                                            <input type="radio" name="typeAlimentation" value="triphase" class="sr-only">
                                            <div class="font-semibold">Triphasé (12–36 kVA)</div>
                                            <div class="text-sm text-gray-600">Gros besoins électriques</div>
                                        </div>
                                        <div class="radio-option" onclick="selectAlimentation('ne-sais-pas')">
                                            <input type="radio" name="typeAlimentation" value="ne-sais-pas" class="sr-only">
                                            <div class="font-semibold">Je ne sais pas</div>
                                            <div class="text-sm text-gray-600">Nous vous conseillerons</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Puissance -->
                                <div id="puissance-section" class="hidden">
                                    <label class="block text-sm font-semibold text-gray-700 mb-4">Puissance demandée *</label>
                                    <select name="puissance" class="form-input" id="puissance-select">
                                        <option value="">Sélectionnez la puissance</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Étape 4: Validation -->
                        <div class="form-step" id="step-4">
                            <h2 class="text-2xl font-bold mb-6 text-gray-900">Validation de votre demande</h2>
                            
                            <!-- Récapitulatif -->
                            <div class="bg-gray-50 rounded-2xl p-6 mb-8">
                                <h3 class="text-lg font-semibold mb-4 text-gray-900">Récapitulatif de votre demande</h3>
                                <div id="form-summary" class="space-y-2 text-sm">
                                    <!-- Summary will be populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Détails finaux -->
                            <div class="space-y-6 mb-8">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-4">État du projet *</label>
                                    <select name="etatProjet" required class="form-input">
                                        <option value="">Sélectionnez l'état de votre projet</option>
                                        <option value="planification">Planification</option>
                                        <option value="permis-depose">Permis déposé</option>
                                        <option value="permis-obtenu">Permis obtenu</option>
                                        <option value="travaux-cours">Travaux en cours</option>
                                        <option value="travaux-termines">Travaux terminés</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-4">Délai de raccordement souhaité *</label>
                                    <select name="delaiSouhaite" required class="form-input">
                                        <option value="">Sélectionnez votre délai préféré</option>
                                        <option value="1-3-mois">1-3 mois</option>
                                        <option value="3-6-mois">3-6 mois</option>
                                        <option value="plus-6-mois">Plus de 6 mois</option>
                                        <option value="des-que-possible">Dès que possible</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-4">Commentaires additionnels</label>
                                    <textarea name="commentaires" class="form-input" rows="4" placeholder="Informations supplémentaires sur votre projet..."></textarea>
                                </div>
                            </div>

                            <!-- CGV -->
                            <div class="mb-8">
                                <label class="flex items-start">
                                    <input type="checkbox" name="acceptCGV" required class="mt-1 mr-4">
                                    <span class="text-sm text-gray-600">
                                        J'accepte les <a href="#" class="text-enedis-blue hover:underline font-medium">conditions générales de vente</a> 
                                        et confirme que les informations fournies sont exactes.
                                    </span>
                                </label>
                            </div>
                        </div>

                        <!-- Navigation Buttons -->
                        <div class="flex justify-between pt-8 border-t border-gray-100">
                            <button type="button" id="prev-btn" onclick="prevStep()" class="btn-secondary hidden">
                                <i class="fas fa-arrow-left mr-2"></i>
                                Précédent
                            </button>
                            <div class="flex-1"></div>
                            <button type="button" id="next-btn" onclick="nextStep()" class="btn-primary">
                                Suivant
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                            <button type="button" id="submit-btn" onclick="submitForm()" class="btn-primary hidden">
                                <i class="fas fa-check mr-2"></i>
                                Finaliser ma demande
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Logo et description -->
            <div class="mb-12">
                <div class="flex items-center mb-6">
                    <svg width="48" height="32" viewBox="0 0 160 80" xmlns="http://www.w3.org/2000/svg">
                        <!-- Maison -->
                        <rect x="20" y="35" width="40" height="30" fill="white" rx="4"/>
                        <polygon points="15,35 40,15 65,35" fill="white"/>
                        <rect x="30" y="50" width="8" height="15" fill="var(--enedis-blue)"/>
                        <rect x="45" y="45" width="6" height="6" fill="var(--enedis-blue)"/>
                        
                        <!-- Câble électrique -->
                        <path d="M65 50 Q80 45 95 50" stroke="var(--enedis-green)" stroke-width="3" fill="none"/>
                        <circle cx="95" cy="50" r="3" fill="var(--enedis-green)"/>
                        
                        <!-- Texte -->
                        <text x="105" y="35" font-family="Inter" font-size="8" font-weight="600" fill="white">Votre partenaire</text>
                        <text x="105" y="45" font-family="Inter" font-size="7" fill="#ccc">raccordement au réseau</text>
                        <text x="105" y="55" font-family="Inter" font-size="7" fill="#ccc">d'Enedis</text>
                    </svg>
                </div>
                <p class="text-gray-400 max-w-lg">
                    Service expert raccordement électrique Enedis. Accompagnement administratif pour particuliers et professionnels.
                </p>
            </div>
            
            <div class="grid md:grid-cols-4 gap-8 mb-12">
                <!-- Raccordement Électrique -->
                <div>
                    <h3 class="text-lg font-semibold mb-6 text-enedis-green">Raccordement Électrique</h3>
                    <ul class="space-y-3 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Raccordement Enedis en ligne</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Branchement maison neuve</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Demande raccordement Enedis</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Délai raccordement électrique Enedis</a></li>
                    </ul>
                </div>
                
                <!-- Services Raccordement -->
                <div>
                    <h3 class="text-lg font-semibold mb-6 text-enedis-green">Services Raccordement</h3>
                    <ul class="space-y-3 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Raccordement électrique particulier</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Raccordement électrique professionnel</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Branchement compteur Linky</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Déplacement compteur électrique</a></li>
                    </ul>
                </div>
                
                <!-- Services Spécialisés -->
                <div>
                    <h3 class="text-lg font-semibold mb-6 text-enedis-green">Services Spécialisés</h3>
                    <ul class="space-y-3 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Raccordement provisoire chantier</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Modification branchement électrique</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Raccordement photovoltaïque</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Viabilisation terrain électrique</a></li>
                    </ul>
                </div>
                
                <!-- Contact -->
                <div>
                    <h3 class="text-lg font-semibold mb-6 text-enedis-green">Contacter nous</h3>
                    <div class="space-y-4 text-gray-400">
                        <div class="flex items-center">
                            <i class="fas fa-phone text-enedis-green mr-3"></i>
                            <a href="tel:0970709570" class="hover:text-white transition-colors font-medium">09 70 70 95 70</a>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-envelope text-enedis-green mr-3"></i>
                            <a href="mailto:contact@raccordement-elec.fr" class="hover:text-white transition-colors">contact@raccordement-elec.fr</a>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-clock text-enedis-green mr-3"></i>
                            <span>Lun-Ven 8h-18h</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <p class="text-gray-400 text-sm mb-4 md:mb-0">
                        © 2025 Raccordement-elec.fr. Tous droits réservés.
                    </p>
                    <p class="text-gray-500 text-sm">
                        Service indépendant d'Enedis – accompagnement administratif uniquement
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Variables globales
        let currentStep = 1;
        const maxSteps = 4;
        let formData = {};

        // Navigation entre pages
        function showPage(pageId) {
            // Cacher toutes les pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Afficher la page demandée
            document.getElementById(pageId).classList.add('active');
            
            // Mettre à jour l'URL sans recharger
            const newUrl = pageId === 'formulaire' ? '/demande-enedis-raccordement' : '/';
            history.pushState({page: pageId}, '', newUrl);
        }

        // Menu mobile
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Gestion du formulaire
        function selectUserType(type) {
            // Désélectionner tous
            document.querySelectorAll('#step-1 .radio-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            // Sélectionner le type choisi
            event.currentTarget.classList.add('selected');
            
            // Mettre à jour le radio
            document.querySelector(`input[value="${type}"]`).checked = true;
            
            // Afficher/cacher les champs conditionnels
            const professionalFields = document.getElementById('professional-fields');
            const collectivityFields = document.getElementById('collectivity-fields');
            
            professionalFields.classList.add('hidden');
            collectivityFields.classList.add('hidden');
            
            if (type === 'professionnel') {
                professionalFields.classList.remove('hidden');
            } else if (type === 'collectivite') {
                collectivityFields.classList.remove('hidden');
            }
            
            formData.userType = type;
        }

        function selectOption(name, value) {
            // Désélectionner tous les options du même groupe
            document.querySelectorAll(`input[name="${name}"]`).forEach(input => {
                input.closest('.radio-option').classList.remove('selected');
            });
            
            // Sélectionner l'option choisie
            event.currentTarget.classList.add('selected');
            document.querySelector(`input[name="${name}"][value="${value}"]`).checked = true;
            
            formData[name] = value;
        }

        function selectAlimentation(type) {
            // Désélectionner tous
            document.querySelectorAll('input[name="typeAlimentation"]').forEach(input => {
                input.closest('.radio-option').classList.remove('selected');
            });
            
            // Sélectionner le type choisi
            event.currentTarget.classList.add('selected');
            document.querySelector(`input[value="${type}"]`).checked = true;
            
            // Afficher/cacher les options de puissance
            const puissanceSection = document.getElementById('puissance-section');
            const puissanceSelect = document.getElementById('puissance-select');
            
            if (type !== 'ne-sais-pas') {
                puissanceSection.classList.remove('hidden');
                
                // Nettoyer les options existantes
                puissanceSelect.innerHTML = '<option value="">Sélectionnez la puissance</option>';
                
                if (type === 'monophase') {
                    puissanceSelect.innerHTML += `
                        <option value="3">3 kVA</option>
                        <option value="6">6 kVA</option>
                        <option value="9">9 kVA</option>
                    `;
                } else if (type === 'triphase') {
                    puissanceSelect.innerHTML += `
                        <option value="12">12 kVA</option>
                        <option value="18">18 kVA</option>
                        <option value="24">24 kVA</option>
                        <option value="36">36 kVA</option>
                        <option value="36+">36 kVA < Tarif Jaune PRO</option>
                    `;
                }
            } else {
                puissanceSection.classList.add('hidden');
            }
            
            formData.typeAlimentation = type;
        }

        // Validation téléphone français
        function formatPhoneNumber(value) {
            // Supprimer tout sauf les chiffres
            const numbers = value.replace(/\D/g, '');
            
            // Limiter à 10 chiffres
            const truncated = numbers.substring(0, 10);
            
            // Formater en XX XX XX XX XX
            if (truncated.length >= 2) {
                return truncated.replace(/(\d{2})(?=\d)/g, '$1 ');
            }
            return truncated;
        }

        // Validation code postal et ville
        function setupPostalCode() {
            const postalInputs = ['postal-facturation', 'postal-project'];
            const cityInputs = ['city-facturation', 'city-project'];
            
            postalInputs.forEach((postalId, index) => {
                const postalInput = document.getElementById(postalId);
                const cityInput = document.getElementById(cityInputs[index]);
                
                if (postalInput && cityInput) {
                    postalInput.addEventListener('input', function() {
                        const postal = this.value;
                        if (postal.length === 5 && /^\d{5}$/.test(postal)) {
                            // Simulation de base de données française
                            const cities = {
                                '75001': 'Paris 1er',
                                '75002': 'Paris 2e',
                                '75003': 'Paris 3e',
                                '69001': 'Lyon 1er',
                                '13001': 'Marseille 1er',
                                '33000': 'Bordeaux',
                                '31000': 'Toulouse',
                                '59000': 'Lille',
                                '67000': 'Strasbourg',
                                '44000': 'Nantes'
                            };
                            
                            cityInput.value = cities[postal] || 'Ville inconnue';
                        } else {
                            cityInput.value = '';
                        }
                    });
                }
            });
        }

        // Gestion des adresses
        function setupAddressManagement() {
            const sameAddressCheckbox = document.getElementById('same-address');
            const projectFields = document.getElementById('project-address-fields');
            const addressProject = document.getElementById('address-project');
            
            sameAddressCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    projectFields.style.display = 'none';
                    addressProject.removeAttribute('required');
                    
                    // Copier les valeurs
                    document.querySelector('input[name="adresseProjet"]').value = document.querySelector('input[name="adresseFacturation"]').value;
                    document.querySelector('input[name="complementProjet"]').value = document.querySelector('input[name="complementFacturation"]').value;
                    document.querySelector('input[name="codePostalProjet"]').value = document.querySelector('input[name="codePostalFacturation"]').value;
                    document.querySelector('input[name="villeProjet"]').value = document.querySelector('input[name="villeFacturation"]').value;
                } else {
                    projectFields.style.display = 'block';
                    addressProject.setAttribute('required', 'required');
                }
            });
        }

        // Navigation entre étapes
        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < maxSteps) {
                    currentStep++;
                    updateStep();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStep();
            }
        }

        function updateStep() {
            // Cacher toutes les étapes
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Afficher l'étape actuelle
            document.getElementById(`step-${currentStep}`).classList.add('active');
            
            // Mettre à jour la barre de progression
            const progressWidth = (currentStep / maxSteps) * 100;
            document.getElementById('progress-fill').style.width = `${progressWidth}%`;
            
            // Mettre à jour les labels
            document.getElementById('step-label').textContent = `Étape ${currentStep} sur ${maxSteps}`;
            
            const stepTitles = [
                'Informations utilisateur',
                'Adresses',
                'Détails du projet',
                'Validation finale'
            ];
            document.getElementById('step-title').textContent = stepTitles[currentStep - 1];
            
            // Gérer les boutons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            
            if (currentStep === 1) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }
            
            if (currentStep === maxSteps) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
                updateSummary();
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
        }

        function validateCurrentStep() {
            const currentStepEl = document.getElementById(`step-${currentStep}`);
            const requiredFields = currentStepEl.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#ef4444';
                    isValid = false;
                } else {
                    field.style.borderColor = '#e5e7eb';
                }
            });
            
            // Validation spécifique pour l'étape 1
            if (currentStep === 1) {
                const userType = document.querySelector('input[name="userType"]:checked');
                if (!userType) {
                    alert('Veuillez sélectionner votre type d\'utilisateur');
                    return false;
                }
                
                // Validation téléphone
                const phone = document.querySelector('input[name="telephone"]').value;
                if (phone.replace(/\s/g, '').length !== 10) {
                    alert('Veuillez saisir un numéro de téléphone français valide (10 chiffres)');
                    return false;
                }
            }
            
            // Validation spécifique pour l'étape 3
            if (currentStep === 3) {
                const typeRaccordement = document.querySelector('input[name="typeRaccordement"]:checked');
                const typeAlimentation = document.querySelector('input[name="typeAlimentation"]:checked');
                
                if (!typeRaccordement) {
                    alert('Veuillez sélectionner un type de raccordement');
                    return false;
                }
                
                if (!typeAlimentation) {
                    alert('Veuillez sélectionner un type d\'alimentation');
                    return false;
                }
            }
            
            if (!isValid) {
                alert('Veuillez remplir tous les champs obligatoires');
            }
            
            return isValid;
        }

        function updateSummary() {
            const summaryEl = document.getElementById('form-summary');
            const form = document.getElementById('raccordement-form');
            const formData = new FormData(form);
            
            let summary = '<div class="grid md:grid-cols-2 gap-6">';
            
            // Informations personnelles
            summary += '<div><h4 class="font-semibold mb-2 text-gray-900">Vos coordonnées</h4>';
            summary += `<p><strong>Type:</strong> ${formData.get('userType') || 'Non renseigné'}</p>`;
            summary += `<p><strong>Nom:</strong> ${formData.get('prenom')} ${formData.get('nom')}</p>`;
            summary += `<p><strong>Email:</strong> ${formData.get('email')}</p>`;
            summary += `<p><strong>Téléphone:</strong> ${formData.get('telephone')}</p>`;
            if (formData.get('raisonSociale')) {
                summary += `<p><strong>Entreprise:</strong> ${formData.get('raisonSociale')}</p>`;
            }
            summary += '</div>';
            
            // Détails du projet
            summary += '<div><h4 class="font-semibold mb-2 text-gray-900">Détails du projet</h4>';
            summary += `<p><strong>Type raccordement:</strong> ${formData.get('typeRaccordement') || 'Non renseigné'}</p>`;
            summary += `<p><strong>Type projet:</strong> ${formData.get('typeProjet') || 'Non renseigné'}</p>`;
            summary += `<p><strong>Alimentation:</strong> ${formData.get('typeAlimentation') || 'Non renseigné'}</p>`;
            if (formData.get('puissance')) {
                summary += `<p><strong>Puissance:</strong> ${formData.get('puissance')} kVA</p>`;
            }
            summary += `<p><strong>Adresse projet:</strong> ${formData.get('adresseProjet')} ${formData.get('codePostalProjet')} ${formData.get('villeProjet')}</p>`;
            summary += '</div>';
            
            summary += '</div>';
            summaryEl.innerHTML = summary;
        }

        function submitForm() {
            if (validateCurrentStep()) {
                // Google Ads conversion tracking
                gtag('event', 'conversion', {
                    'send_to': 'AW-16698052873/IFUxCJLHtMUaEtmioJo-',
                    'transaction_id': generateReference()
                });
                
                // Générer une référence unique
                const reference = generateReference();
                
                // Redirection vers page de confirmation
                window.location.href = `/confirmation/${reference}`;
            }
        }

        function generateReference() {
            const now = new Date();
            const year = now.getFullYear();
            const random = Math.floor(Math.random() * 9000) + 1000;
            return `ref-${random}-${year}`;
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Configuration du téléphone
            const phoneInput = document.getElementById('phone-input');
            if (phoneInput) {
                phoneInput.addEventListener('input', function() {
                    this.value = formatPhoneNumber(this.value);
                });
            }
            
            // Configuration des codes postaux
            setupPostalCode();
            
            // Configuration des adresses
            setupAddressManagement();
            
            // Configuration du routage
            window.addEventListener('popstate', function(e) {
                if (e.state && e.state.page) {
                    showPage(e.state.page);
                } else {
                    showPage('home');
                }
            });
            
            // Gestion de l'URL initiale
            if (window.location.pathname === '/demande-enedis-raccordement') {
                showPage('formulaire');
            }
        });

        // Form Start Conversion
        function gtag_report_conversion(url) {
            var callback = function () {
                if (typeof(url) != 'undefined') {
                    window.location = url;
                }
            };
            gtag('event', 'conversion', {
                'send_to': 'AW-16698052873/5o3ICMLjpMUaEtmioJo-',
                'event_callback': callback
            });
            return false;
        }

        // Tracking form start
        document.addEventListener('DOMContentLoaded', function() {
            const formButtons = document.querySelectorAll('[onclick*="formulaire"]');
            formButtons.forEach(button => {
                button.addEventListener('click', function() {
                    gtag('event', 'conversion', {
                        'send_to': 'AW-16698052873/5o3ICMLjpMUaEtmioJo-'
                    });
                });
            });
        });
    </script>
</body>
</html>
